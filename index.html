<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Where Champions Come From â€” Milano-Cortina 2026</title>

<!-- Social / OG Tags -->
<meta property="og:title" content="Where Champions Come From â€” Milano-Cortina 2026">
<meta property="og:description" content="Every Olympic medalist mapped to their hometown. An interactive story by HYPERLOCO.">
<meta property="og:type" content="website">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Where Champions Come From â€” Milano-Cortina 2026">
<meta name="twitter:description" content="Every Olympic medalist mapped to their hometown. An interactive story by HYPERLOCO.">

<!-- Mapbox GL -->
<script src="https://api.mapbox.com/mapbox-gl-js/v3.3.0/mapbox-gl.js"></script>
<link href="https://api.mapbox.com/mapbox-gl-js/v3.3.0/mapbox-gl.css" rel="stylesheet">

<!-- Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=Instrument+Serif:ital@0;1&display=swap" rel="stylesheet">

<style>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DESIGN TOKENS
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
:root {
  /* Olympic palette */
  --oc-blue:    #0081C8;
  --oc-yellow:  #FCB131;
  --oc-black:   #1a1a1a;
  --oc-green:   #00A651;
  --oc-red:     #EE334E;

  /* Medal palette */
  --medal-gold:   #DAA520;
  --medal-silver: #808080;
  --medal-bronze: #B8600A;

  /* UI palette */
  --bg:         #f5f0e8;
  --card-bg:    #fff;
  --card-border:#e0dcd4;
  --card-shadow:0 2px 12px rgba(0,0,0,.05);
  --divider:    #f0ece4;
  --text:       #1a1a1a;
  --text-mid:   #555;
  --text-light: #888;
  --text-muted: #aaa;

  /* Typography scale (rem) */
  --fs-label:   .6rem;
  --fs-body:    .85rem;
  --fs-ui:      .75rem;
  --fs-heading: 1.15rem;
  --fs-display: 1.6rem;

  /* Spacing */
  --card-pad:   1.2rem 1.5rem;
  --card-radius:10px;

  /* Fonts */
  --sans: 'Space Grotesk', system-ui, sans-serif;
  --serif:'Instrument Serif', Georgia, serif;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RESET & BASE
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
*, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }
html, body { height:100%; overflow:hidden; background:var(--bg); color:var(--text); font-family:var(--sans); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MAP
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#map { position:fixed; inset:0; z-index:0; }
.mapboxgl-ctrl-attrib { font-size:9px!important; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SHARED CARD STYLE
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.ui-card {
  background:var(--card-bg);
  border:1px solid var(--card-border);
  border-radius:var(--card-radius);
  box-shadow:var(--card-shadow);
  font-family:var(--sans);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HERO
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#hero {
  position:fixed; inset:0; z-index:20;
  display:flex; flex-direction:column;
  align-items:center; justify-content:center;
  background:radial-gradient(ellipse at 50% 55%, rgba(245,240,232,.15) 20%, rgba(245,240,232,.92) 65%);
  transition:opacity 1.2s ease;
  cursor:pointer;
  pointer-events:all;
}
#hero.hidden { opacity:0; pointer-events:none; }

#hero .rings {
  opacity:.1; position:absolute;
  top:50%; left:50%;
  transform:translate(-50%,-75%);
  width:clamp(200px,40vw,450px);
  pointer-events:none;
}
#hero h1 {
  font-family:var(--serif);
  font-size:clamp(2.4rem,7vw,5.5rem);
  font-weight:400; font-style:italic;
  letter-spacing:-.02em; text-align:center;
  line-height:1.05; color:var(--text);
  position:relative;
}
#hero h1 span { color:var(--oc-blue); }
#hero .sub {
  font-size:clamp(.65rem,1.5vw,.95rem);
  font-weight:400; letter-spacing:.3em;
  text-transform:uppercase;
  margin-top:1.2rem; color:#666;
}
#hero .enter {
  margin-top:2.5rem;
  font-size:var(--fs-body); font-weight:500;
  letter-spacing:.25em; text-transform:uppercase;
  color:#444;
  animation:pulse 2s ease-in-out infinite;
}
@keyframes pulse { 0%,100%{opacity:.5} 50%{opacity:1} }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   STATS CARD (top-left)
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#stats {
  position:fixed; top:1.5rem; left:2rem;
  z-index:15; pointer-events:all;
  padding:var(--card-pad); width:500px;
}
#stats .stats-top {
  display:flex; align-items:center; gap:.8rem;
  margin-bottom:.7rem;
}
#stats .stats-rings-img { height:22px; width:auto; flex-shrink:0; }
#stats .stats-title {
  font-family:var(--serif);
  font-size:1.25rem; font-style:italic;
  color:var(--text); line-height:1.15;
}
#stats .stats-subtitle {
  font-size:.65rem; color:var(--text-light);
  letter-spacing:.05em; margin-top:.1rem;
}
#stats .stats-divider {
  height:1px; background:var(--divider);
  margin-bottom:.7rem;
}
#stats .stats-grid { display:flex; gap:1rem; }
#stats .stat-item { flex:1; }
#stats .stat-label {
  font-size:var(--fs-label); letter-spacing:.15em;
  text-transform:uppercase; color:var(--text-muted);
  font-weight:700; margin-bottom:.15rem;
}
#stats .stat-value {
  font-size:var(--fs-body); color:var(--text);
  font-weight:600; line-height:1.3;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TOOLTIPS
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.stat-tip {
  position:relative; cursor:help;
  border-bottom:1px dotted #ccc;
}
.stat-tip .tip-content {
  display:none; position:absolute;
  bottom:calc(100% + 8px); left:0;
  background:var(--oc-black); color:#eee;
  font-family:var(--sans);
  font-size:.7rem; font-weight:400;
  line-height:1.6;
  padding:.7rem .9rem;
  border-radius:8px; width:220px;
  box-shadow:0 4px 16px rgba(0,0,0,.2);
  z-index:30; pointer-events:none;
}
.stat-tip .tip-content::after {
  content:''; position:absolute; top:100%; left:16px;
  border:6px solid transparent;
  border-top-color:var(--oc-black);
}
.stat-tip:hover .tip-content,
.stat-tip:focus .tip-content { display:block; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   BRAND CARD (top-right)
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#brand {
  position:fixed; top:1.5rem; right:2rem;
  z-index:15; pointer-events:all;
  padding:1rem 1.4rem; text-align:right;
}
#brand .logo {
  font-size:var(--fs-ui); letter-spacing:.35em;
  text-transform:uppercase; font-weight:700;
  color:var(--text);
}
#brand .tagline {
  font-size:var(--fs-label); letter-spacing:.15em;
  text-transform:uppercase; color:var(--text-light);
  margin-top:.15rem;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   STORY SPOTLIGHT (bottom-left)
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#stories {
  position:fixed; bottom:6.5rem; left:2rem;
  z-index:15; pointer-events:all;
  width:300px;
  padding:1.1rem 1.4rem 1rem;
  opacity:0; transform:translateY(10px);
  transition:all .6s ease;
}
#stories.visible { opacity:1; transform:translateY(0); }

#stories .story-header {
  display:flex; align-items:center;
  justify-content:space-between;
  margin-bottom:.6rem;
}
#stories .story-counter {
  font-size:var(--fs-label); letter-spacing:.15em;
  text-transform:uppercase; color:var(--oc-red);
  font-weight:700;
}
#stories .story-nav { display:flex; gap:.3rem; }
#stories .story-nav button {
  background:none; border:1px solid var(--card-border);
  border-radius:4px;
  width:28px; height:28px;
  font-size:var(--fs-ui); color:var(--text-light);
  cursor:pointer;
  display:flex; align-items:center; justify-content:center;
  transition:all .2s;
}
#stories .story-nav button:hover {
  background:var(--oc-blue); border-color:var(--oc-blue); color:#fff;
}
#stories .story-sport {
  font-size:var(--fs-label); letter-spacing:.2em;
  text-transform:uppercase; color:var(--oc-blue);
  font-weight:700; margin-bottom:.3rem;
}
#stories .story-headline {
  font-family:var(--serif);
  font-size:var(--fs-heading); font-style:italic;
  color:var(--text); line-height:1.25;
  margin-bottom:.4rem;
}
#stories .story-body {
  font-size:var(--fs-body); color:var(--text-mid);
  line-height:1.55;
}
#stories .story-dots {
  display:flex; gap:.35rem; justify-content:center;
  margin-top:.8rem;
}
#stories .story-dots span {
  width:7px; height:7px; border-radius:50%;
  background:#ddd; cursor:pointer; transition:all .25s;
}
#stories .story-dots span.active {
  background:var(--oc-red); transform:scale(1.3);
}
#stories .story-next-hint {
  text-align:center; margin-top:.5rem;
  font-size:var(--fs-label); color:#bbb;
  letter-spacing:.1em;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ATHLETE CARD (right)
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#athlete-card {
  position:fixed; top:50%; right:2rem;
  transform:translateY(-50%) translateX(120%);
  z-index:25; width:340px;
  padding:0; overflow:visible;
  transition:transform .5s cubic-bezier(.22,1,.36,1), opacity .5s;
  opacity:0; pointer-events:all;
  box-shadow:0 8px 40px rgba(0,0,0,.1);
  border-radius:14px;
}
#athlete-card.visible {
  transform:translateY(-50%) translateX(0);
  opacity:1;
}
#athlete-card .close-btn {
  position:absolute; top:.7rem; right:.7rem;
  background:var(--divider); border:none; color:var(--text-light);
  cursor:pointer; font-size:1rem; line-height:1;
  width:28px; height:28px; border-radius:50%;
  display:flex; align-items:center; justify-content:center;
  transition:all .2s; z-index:5;
}
#athlete-card .close-btn:hover { background:var(--card-border); color:var(--text); }
#athlete-card .card-body { padding:1.4rem 1.6rem 1.2rem; }

#athlete-card .athlete-entry {
  padding:.8rem 0;
  border-bottom:1px solid var(--divider);
}
#athlete-card .athlete-entry:last-child { border-bottom:none; }

#athlete-card .athlete-top {
  display:flex; align-items:flex-start; gap:.7rem;
}
#athlete-card .medal-icon {
  font-size:3rem; flex-shrink:0; line-height:1;
}
#athlete-card .athlete-name {
  font-family:var(--serif);
  font-size:var(--fs-display); font-style:italic;
  color:var(--text); line-height:1.15;
}
#athlete-card .athlete-event {
  font-size:.72rem; color:var(--text-light);
  margin-top:.2rem;
}
#athlete-card .athlete-meta {
  display:flex; gap:1.2rem;
  margin-top:.7rem; padding-top:.6rem;
  border-top:1px solid var(--divider);
}
#athlete-card .meta-block {}
#athlete-card .meta-label {
  font-size:var(--fs-label); letter-spacing:.2em;
  text-transform:uppercase; color:var(--text-muted);
  font-weight:700; margin-bottom:.2rem;
}
#athlete-card .meta-value {
  font-size:var(--fs-body); color:#333;
  display:flex; align-items:center; gap:.3rem;
}
#athlete-card .meta-flag { font-size:1.15rem; }
#athlete-card .athlete-link {
  display:inline-flex; align-items:center; gap:.3rem;
  margin-top:.5rem;
  font-size:var(--fs-ui); font-weight:600;
  color:var(--oc-blue); text-decoration:none;
  letter-spacing:.02em; transition:color .2s;
}
#athlete-card .athlete-link:hover { color:#005a8c; }
#athlete-card .athlete-link .arrow { font-size:var(--fs-ui); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   BOTTOM BAR
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#bottom-bar {
  position:fixed; bottom:0; left:0; right:0;
  z-index:15; pointer-events:all;
  background:linear-gradient(transparent, rgba(245,240,232,.97) 35%);
  padding:2rem 2rem 1.2rem;
}
#strip-header {
  display:flex; align-items:center;
  justify-content:space-between;
  margin-bottom:.5rem; padding:0 .2rem;
}
#strip-header .strip-label {
  font-size:.65rem; font-weight:700;
  letter-spacing:.2em; text-transform:uppercase;
  color:#999;
}
#strip-header .strip-scroll-cue {
  font-size:.65rem; color:#aaa;
  display:flex; align-items:center; gap:.3rem;
  animation:nudge 2s ease-in-out infinite;
}
@keyframes nudge { 0%,100%{transform:translateX(0)} 50%{transform:translateX(4px)} }
#medal-strip {
  display:flex; gap:.5rem;
  overflow-x:auto; scroll-behavior:smooth;
  padding-bottom:.5rem;
  -ms-overflow-style:none; scrollbar-width:none;
}
#medal-strip::-webkit-scrollbar { display:none; }
.country-pill {
  flex-shrink:0;
  display:flex; align-items:center; gap:.45rem;
  padding:.45rem .85rem;
  border-radius:100px; background:var(--card-bg);
  border:1px solid var(--card-border);
  cursor:pointer; transition:all .25s;
  font-size:.8rem; font-weight:500;
  white-space:nowrap;
  box-shadow:0 1px 3px rgba(0,0,0,.04);
}
.country-pill:hover, .country-pill.active {
  background:var(--oc-blue); border-color:var(--oc-blue);
  color:#fff; transform:translateY(-2px);
  box-shadow:0 4px 12px rgba(0,129,200,.25);
}
.country-pill:hover .g, .country-pill:hover .s, .country-pill:hover .b,
.country-pill.active .g, .country-pill.active .s, .country-pill.active .b { color:#fff; }
.country-pill .flag { font-size:1.1rem; }
.country-pill .medals { display:flex; gap:.25rem; font-size:.7rem; }
.country-pill .g { color:#c9a500; }
.country-pill .s { color:#8a8a8a; }
.country-pill .b { color:#a06020; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RESPONSIVE â€” TABLET (â‰¤1024px)
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
@media (max-width:1024px) {
  #stats { width:420px; }
  #stories { width:280px; }
  #athlete-card { width:300px; }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RESPONSIVE â€” MOBILE (â‰¤768px)
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
@media (max-width:768px) {
  /* Stats card */
  #stats {
    width:calc(100vw - 5rem);
    max-width:360px;
    top:1rem; left:1rem;
    padding:.9rem 1.1rem;
  }
  #stats .stats-rings-img { height:16px; }
  #stats .stats-title { font-size:1rem; }
  #stats .stats-subtitle { font-size:.55rem; }
  #stats .stats-grid { flex-wrap:wrap; gap:.4rem .6rem; }
  #stats .stat-item { flex:1 1 45%; min-width:0; }

  /* Brand */
  #brand {
    padding:.4rem .6rem; top:.8rem; right:.8rem;
  }
  #brand .logo { font-size:.5rem; letter-spacing:.2em; }
  #brand .tagline { display:none; }

  /* Story spotlight */
  #stories {
    left:1rem; right:1rem; width:auto;
    bottom:5.5rem;
  }

  /* Athlete card â€” centered overlay on mobile */
  #athlete-card {
    top:50%; left:50%; right:auto;
    width:calc(100vw - 2rem);
    max-width:340px;
    max-height:60vh;
    border-radius:14px;
    transform:translate(-50%,-50%) scale(.9);
    overflow-y:auto;
    opacity:0;
  }
  #athlete-card.visible {
    transform:translate(-50%,-50%) scale(1);
    opacity:1;
  }

  /* Bottom bar */
  #bottom-bar { padding:1.2rem 1rem .8rem; }
  .country-pill { font-size:.7rem; padding:.35rem .65rem; }

  /* Hero */
  #hero h1 { font-size:clamp(2rem,8vw,3rem); }
  #hero .sub { font-size:.65rem; letter-spacing:.2em; }
  #hero .enter { font-size:.75rem; }

  /* Tooltips â†’ tap-friendly */
  .stat-tip .tip-content { width:180px; }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RESPONSIVE â€” SMALL MOBILE (â‰¤480px)
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
@media (max-width:480px) {
  #stats { max-width:calc(100vw - 2rem); }
  #stats .stats-grid { gap:.3rem .5rem; }
  #stats .stat-label { font-size:.5rem; }
  #stats .stat-value { font-size:.75rem; }
  #stories .story-headline { font-size:1rem; }
  #stories .story-body { font-size:.78rem; }
}
</style>
</head>
<body>

<div id="map"></div>

<!-- â•â•â• HERO â•â•â• -->
<div id="hero">
  <img src="olympic-rings.svg" alt="" class="rings">
  <h1>Where <span>Champions</span><br>Come From</h1>
  <div class="sub">Milano-Cortina 2026 Â· Every Medal, Every Hometown</div>
  <div class="enter">Click to explore the map</div>
</div>

<!-- â•â•â• STATS â•â•â• -->
<div id="stats" class="ui-card" style="opacity:0;transition:opacity .6s">
  <div class="stats-top">
    <img src="olympic-rings.svg" alt="Olympic Rings" class="stats-rings-img">
    <div>
      <div class="stats-title">Where Champions Come From</div>
      <div class="stats-subtitle">Milano-Cortina 2026 Â· Closing Ceremony</div>
    </div>
  </div>
  <div class="stats-divider"></div>
  <div class="stats-grid">
    <div class="stat-item">
      <div class="stat-label">Medalling Nations</div>
      <div class="stat-value">29 of 92</div>
    </div>
    <div class="stat-item">
      <div class="stat-label">Athletes</div>
      <div class="stat-value">2,900+</div>
    </div>
    <div class="stat-item">
      <div class="stat-label">Medal Events</div>
      <div class="stat-value">116</div>
    </div>
    <div class="stat-item">
      <div class="stat-label">Sports &amp; Disciplines</div>
      <div class="stat-value">
        <span class="stat-tip" tabindex="0">8 sports<span class="tip-content">Alpine Skiing Â· Biathlon Â· Bobsled Â· Cross-Country Skiing Â· Curling Â· Ice Hockey Â· Luge Â· Skating</span></span><br>
        <span class="stat-tip" tabindex="0">16 disciplines<span class="tip-content">Alpine Â· Biathlon Â· Bobsled Â· Cross-Country Â· Curling Â· Figure Skating Â· Freestyle Skiing Â· Ice Hockey Â· Luge Â· Nordic Combined Â· Short Track Â· Skeleton Â· Ski Jumping Â· Ski Mountaineering Â· Snowboard Â· Speed Skating</span></span>
      </div>
    </div>
  </div>
</div>

<!-- â•â•â• BRAND â•â•â• -->
<div id="brand" class="ui-card" style="opacity:0;transition:opacity .6s">
  <div class="logo">HYPERLOCO</div>
  <div class="tagline">Maps that tell stories</div>
</div>

<!-- â•â•â• STORY SPOTLIGHT â•â•â• -->
<div id="stories" class="ui-card">
  <div class="story-header">
    <span class="story-counter" id="story-counter">1 / 10</span>
    <div class="story-nav">
      <button onclick="prevStory()" aria-label="Previous story">â†</button>
      <button onclick="nextStory()" aria-label="Next story">â†’</button>
    </div>
  </div>
  <div class="story-sport" id="story-sport"></div>
  <div class="story-headline" id="story-headline"></div>
  <div class="story-body" id="story-body"></div>
  <div class="story-dots" id="story-dots"></div>
  <div class="story-next-hint">Click â†’ for next highlight</div>
</div>

<!-- â•â•â• ATHLETE CARD â•â•â• -->
<div id="athlete-card" class="ui-card">
  <button class="close-btn" onclick="closeCard()" aria-label="Close">âœ•</button>
  <div class="card-body" id="card-body"></div>
</div>

<!-- â•â•â• BOTTOM STRIP â•â•â• -->
<div id="bottom-bar" style="opacity:0;transition:opacity .6s">
  <div id="strip-header">
    <span class="strip-label">Medal Count by Country</span>
    <span class="strip-scroll-cue">Scroll for more â†’</span>
  </div>
  <div id="medal-strip"></div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     JAVASCRIPT
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<script>
/* â”€â”€ Constants â”€â”€ */
const OC    = { blue:'#0081C8', yellow:'#FCB131', black:'#1a1a1a', green:'#00A651', red:'#EE334E' };
const MEDAL = { gold:'#DAA520', silver:'#808080', bronze:'#B8600A' };
const CORTINA = { lat:46.54, lng:12.14 };

/* â”€â”€ Medal Data â”€â”€ */
const countries = [
  {
    name:'Norway', code:'NOR', flag:'ğŸ‡³ğŸ‡´', ring:OC.blue,
    gold:18, silver:12, bronze:11,
    athletes:[
      { name:'Johannes Thingnes BÃ¸', event:'Biathlon Â· Multiple Golds', medal:'gold', hometown:'Stryn', lat:61.905, lng:6.723, slug:'johannes-thingnes-boe' },
      { name:'Therese Johaug', event:'Cross-Country Skiing', medal:'gold', hometown:'Dalsbygda', lat:62.15, lng:10.73, slug:'therese-johaug' },
      { name:'Jarl Magnus Riiber', event:'Nordic Combined', medal:'gold', hometown:'BÃ¦rum', lat:59.89, lng:10.53, slug:'jarl-magnus-riiber' },
      { name:'Marte Olsbu RÃ¸iseland', event:'Biathlon', medal:'silver', hometown:'Froland', lat:58.54, lng:8.64, slug:'marte-olsbu-roeiseland' },
    ]
  },
  {
    name:'Switzerland', code:'SUI', flag:'ğŸ‡¨ğŸ‡­', ring:OC.red,
    gold:8, silver:8, bronze:8,
    athletes:[
      { name:'Marco Odermatt', event:'Alpine Skiing Â· Giant Slalom', medal:'gold', hometown:'Buochs', lat:46.97, lng:8.42, slug:'marco-odermatt' },
      { name:'Lara Gut-Behrami', event:'Alpine Skiing Â· Super-G', medal:'gold', hometown:'Comano', lat:46.18, lng:8.95, slug:'lara-gut-behrami' },
    ]
  },
  {
    name:'Sweden', code:'SWE', flag:'ğŸ‡¸ğŸ‡ª', ring:OC.yellow,
    gold:7, silver:5, bronze:5,
    athletes:[
      { name:'Sara Hector', event:'Alpine Skiing Â· Giant Slalom', medal:'silver', hometown:'Kungsbacka', lat:57.49, lng:12.07, slug:'sara-hector' },
      { name:'Nils van der Poel', event:'Speed Skating', medal:'gold', hometown:'TrollhÃ¤ttan', lat:58.28, lng:12.29, slug:'nils-van-der-poel' },
    ]
  },
  {
    name:'United States', code:'USA', flag:'ğŸ‡ºğŸ‡¸', ring:OC.blue,
    gold:6, silver:7, bronze:6,
    athletes:[
      { name:'Mikaela Shiffrin', event:'Alpine Skiing Â· Slalom', medal:'gold', hometown:'Edwards, Colorado', lat:39.64, lng:-106.59, slug:'mikaela-shiffrin' },
      { name:'Chloe Kim', event:'Snowboard Â· Halfpipe', medal:'gold', hometown:'Torrance, California', lat:33.84, lng:-118.34, slug:'chloe-kim' },
      { name:'Nathan Chen', event:'Figure Skating', medal:'silver', hometown:'Salt Lake City, Utah', lat:40.76, lng:-111.89, slug:'nathan-chen' },
    ]
  },
  {
    name:'Canada', code:'CAN', flag:'ğŸ‡¨ğŸ‡¦', ring:OC.red,
    gold:5, silver:4, bronze:7,
    athletes:[
      { name:'MikaÃ«l Kingsbury', event:'Freestyle Â· Moguls', medal:'gold', hometown:'Deux-Montagnes, QuÃ©bec', lat:45.54, lng:-73.89, slug:'mikael-kingsbury' },
      { name:'Mark McMorris', event:'Snowboard Â· Slopestyle', medal:'silver', hometown:'Regina, Saskatchewan', lat:50.45, lng:-104.61, slug:'mark-mcmorris' },
    ]
  },
  {
    name:'Italy', code:'ITA', flag:'ğŸ‡®ğŸ‡¹', ring:OC.green,
    gold:5, silver:5, bronze:6,
    athletes:[
      { name:'Federica Brignone', event:'Alpine Skiing Â· Combined', medal:'gold', hometown:'La Salle, Aosta Valley', lat:45.75, lng:7.07, slug:'federica-brignone' },
      { name:'Dorothea Wierer', event:'Biathlon', medal:'silver', hometown:'Rasun-Anterselva', lat:46.78, lng:12.04, slug:'dorothea-wierer' },
      { name:'Sofia Goggia', event:'Alpine Skiing Â· Downhill', medal:'gold', hometown:'Bergamo', lat:45.7, lng:9.67, slug:'sofia-goggia' },
    ]
  },
  {
    name:'Germany', code:'GER', flag:'ğŸ‡©ğŸ‡ª', ring:OC.black,
    gold:5, silver:5, bronze:4,
    athletes:[
      { name:'Francesco Friedrich', event:'Bobsled Â· 2-Man', medal:'gold', hometown:'Pirna, Saxony', lat:50.96, lng:13.94, slug:'francesco-friedrich' },
      { name:'Denise Herrmann-Wick', event:'Biathlon', medal:'silver', hometown:'Bockau, Saxony', lat:50.54, lng:12.71, slug:'denise-herrmann-wick' },
    ]
  },
  {
    name:'Austria', code:'AUT', flag:'ğŸ‡¦ğŸ‡¹', ring:OC.red,
    gold:4, silver:8, bronze:3,
    athletes:[
      { name:'Manuel Feller', event:'Alpine Skiing Â· Slalom', medal:'silver', hometown:'Fieberbrunn, Tyrol', lat:47.48, lng:12.55, slug:'manuel-feller' },
      { name:'Anna Gasser', event:'Snowboard Â· Big Air', medal:'gold', hometown:'Millstatt, Carinthia', lat:46.80, lng:13.58, slug:'anna-gasser' },
    ]
  },
  {
    name:'France', code:'FRA', flag:'ğŸ‡«ğŸ‡·', ring:OC.blue,
    gold:4, silver:3, bronze:5,
    athletes:[
      { name:'Quentin Fillon Maillet', event:'Biathlon Â· Sprint', medal:'gold', hometown:'Champagnole, Jura', lat:46.75, lng:5.91, slug:'quentin-fillon-maillet' },
      { name:'Alexis Pinturault', event:'Alpine Skiing Â· Combined', medal:'silver', hometown:'Courchevel, Savoie', lat:45.42, lng:6.63, slug:'alexis-pinturault' },
    ]
  },
  {
    name:'Netherlands', code:'NED', flag:'ğŸ‡³ğŸ‡±', ring:OC.yellow,
    gold:4, silver:2, bronze:4,
    athletes:[
      { name:'Irene Schouten', event:'Speed Skating Â· 5000m', medal:'gold', hometown:'Andijk', lat:52.75, lng:5.22, slug:'irene-schouten' },
    ]
  },
  {
    name:'Japan', code:'JPN', flag:'ğŸ‡¯ğŸ‡µ', ring:OC.red,
    gold:3, silver:4, bronze:5,
    athletes:[
      { name:'Ryoyu Kobayashi', event:'Ski Jumping Â· Normal Hill', medal:'bronze', hometown:'Hachimantai, Iwate', lat:39.93, lng:140.80, slug:'ryoyu-kobayashi' },
      { name:'Yuzuru Hanyu', event:'Figure Skating', medal:'gold', hometown:'Sendai, Miyagi', lat:38.27, lng:140.87, slug:'yuzuru-hanyu' },
    ]
  },
  {
    name:'South Korea', code:'KOR', flag:'ğŸ‡°ğŸ‡·', ring:OC.blue,
    gold:2, silver:3, bronze:2,
    athletes:[
      { name:'Hwang Dae-heon', event:'Short Track Â· 1500m', medal:'gold', hometown:'Seoul', lat:37.57, lng:126.98, slug:'hwang-dae-heon' },
    ]
  },
  {
    name:'China', code:'CHN', flag:'ğŸ‡¨ğŸ‡³', ring:OC.red,
    gold:2, silver:2, bronze:3,
    athletes:[
      { name:'Eileen Gu', event:'Freestyle Â· Halfpipe', medal:'gold', hometown:'San Francisco, California', hometownCountry:'United States', lat:37.77, lng:-122.42, slug:'eileen-gu' },
    ]
  },
  {
    name:'Brazil', code:'BRA', flag:'ğŸ‡§ğŸ‡·', ring:OC.green,
    gold:1, silver:0, bronze:0,
    athletes:[
      { name:'Lucas Pinheiro Braathen', event:'Alpine Skiing Â· Giant Slalom', medal:'gold', hometown:'SÃ£o Paulo', hometownCountry:'Brazil', lat:-23.55, lng:-46.63, slug:'lucas-pinheiro-braathen' },
    ]
  },
  {
    name:'Georgia', code:'GEO', flag:'ğŸ‡¬ğŸ‡ª', ring:OC.yellow,
    gold:0, silver:0, bronze:1,
    athletes:[
      { name:'Georgian Athlete', event:'First-Ever Winter Medal', medal:'bronze', hometown:'Tbilisi', lat:41.72, lng:44.79, slug:'' },
    ]
  },
];

/* â”€â”€ Stories (ordered by public hype) â”€â”€ */
const STORIES = [
  { sport:'Freestyle Skiing', headline:"Eileen Gu: San Francisco girl, China's golden star", body:"The most polarizing athlete of the Games. Born and raised in California, competing under the Chinese flag â€” Gu's dual identity sparked global debate. Her hometown dot sits in San Francisco. Her medal counts for Beijing. The map tells a story no headline can.", center:[-122.42, 37.77], zoom:8 },
  { sport:'Alpine Skiing', headline:"Brazil wins its first-ever Winter Olympic medal â€” gold", body:'Lucas Pinheiro Braathen, born in SÃ£o Paulo to a Brazilian mother and Norwegian father, stunned the world in Giant Slalom. The first tropical, Latin American, and South American nation to medal at a Winter Games. SÃ£o Paulo to the podium.', center:[-46.63, -23.55], zoom:6 },
  { sport:'Snowboard Â· Halfpipe', headline:'Chloe Kim: from Torrance strip malls to back-to-back gold', body:'The daughter of Korean immigrants, raised in a Los Angeles suburb where the closest mountain is a two-hour drive. She proved again that champions come from the most unexpected zip codes. Halfpipe gold, again.', center:[-118.34, 33.84], zoom:9 },
  { sport:'Biathlon', headline:'Norway shatters the all-time gold record: 18 golds', body:"Johannes Thingnes BÃ¸, from Stryn â€” population 7,000 â€” led the charge. Norway surpassed their own 2022 record of 16. A nation of 5.5 million, dominating from villages most people can't find on a map. Until now.", center:[6.72, 61.9], zoom:7 },
  { sport:'Alpine Skiing Â· Downhill', headline:'Sofia Goggia races on home snow â€” 200km from her doorstep', body:'The Italian downhill queen from Bergamo delivered for the host nation in the Dolomites. The crowd roar echoed from Milan to Cortina. Home-field advantage, mapped in meters.', center:[9.67, 45.7], zoom:8 },
  { sport:'Figure Skating', headline:"Yuzuru Hanyu: Sendai's son returns to the ice", body:'From the city devastated by the 2011 earthquake and tsunami, Hanyu has always carried Sendai on his shoulders. His hometown story is one of resilience, mapped in ice and tears. The entire city watched.', center:[140.87, 38.27], zoom:8 },
  { sport:'Alpine Skiing Â· Giant Slalom', headline:'Marco Odermatt: the Swiss machine from a lakeside village', body:'Buochs, Switzerland â€” population 5,500, perched on Lake Lucerne â€” produced the most dominant alpine skier of his generation. Small town, big mountain, gold medal.', center:[8.42, 46.97], zoom:9 },
  { sport:'Short Track Â· 1500m', headline:"Hwang Dae-heon keeps Korea's short track dynasty alive", body:"Short track speed skating IS South Korea's Olympic identity. Hwang, from Seoul â€” a city of 10 million â€” carried that tradition forward. In a sport measured in hundredths of seconds, he delivered by a blade's width.", center:[126.98, 37.57], zoom:8 },
  { sport:'Ski Mountaineering', headline:'A brand-new Olympic sport is born in the Alps', body:'Climbing mountains on skis and racing back down â€” ski mountaineering debuted at Milano-Cortina 2026. Born in the Alpine villages that hosted these Games, now on the world stage in the very mountains where it was invented.', center:[12.14, 46.54], zoom:9 },
  { sport:'Cross-Country Skiing', headline:"Georgia wins its first-ever Winter Olympic medal", body:'A historic bronze for a nation of 3.7 million, wedged between the Caucasus mountains and the Black Sea. Proof that geography shapes athletes in ways no training program can replicate. Tbilisi celebrates.', center:[44.79, 41.72], zoom:7 },
];

/* â”€â”€ Map Init â”€â”€ */
mapboxgl.accessToken = 'pk.eyJ1IjoiajAwYnkiLCJhIjoiY2x1bHUzbXZnMGhuczJxcG83YXY4czJ3ayJ9.S5PZpU9VDwLMjoX_0x5FDQ';

const map = new mapboxgl.Map({
  container: 'map',
  style: 'mapbox://styles/mapbox/light-v11',
  center: [12, 30],
  zoom: 1.8,
  pitch: 0,
  bearing: 0,
  projection: 'globe',
  antialias: true,
});

map.scrollZoom.disable();
map.dragRotate.enable();
map.touchZoomRotate.enable();

/* â”€â”€ Globe Rotation â”€â”€ */
let rotating = true;
function rotateGlobe() {
  if (!rotating) return;
  const c = map.getCenter();
  c.lng += 0.12;
  map.easeTo({ center: c, duration: 200, easing: t => t });
  requestAnimationFrame(rotateGlobe);
}

map.on('style.load', () => {
  map.setFog({
    color: 'rgba(230,225,215,1)',
    'high-color': 'rgba(200,210,230,1)',
    'horizon-blend': 0.06,
    'space-color': 'rgba(15,20,35,1)',
    'star-intensity': 0.4,
  });
  rotateGlobe();
});

/* â”€â”€ Build Map Layers â”€â”€ */
map.on('load', () => {
  const arcFeatures = [];
  const pointFeatures = [];

  countries.forEach(c => {
    c.athletes.forEach(a => {
      const steps = 80;
      const coords = [];
      for (let i = 0; i <= steps; i++) {
        const t = i / steps;
        coords.push([
          a.lng + (CORTINA.lng - a.lng) * t,
          a.lat + (CORTINA.lat - a.lat) * t,
        ]);
      }

      const medalColor = MEDAL[a.medal] || OC.blue;

      arcFeatures.push({
        type: 'Feature',
        properties: { color: medalColor, ringColor: c.ring },
        geometry: { type: 'LineString', coordinates: coords },
      });

      pointFeatures.push({
        type: 'Feature',
        properties: {
          name: a.name, event: a.event, medal: a.medal,
          hometown: a.hometown, country: c.name, flag: c.flag,
          color: medalColor, ringColor: c.ring,
          slug: a.slug || '',
          hometownCountry: a.hometownCountry || c.name,
        },
        geometry: { type: 'Point', coordinates: [a.lng, a.lat] },
      });
    });
  });

  // Host city marker
  pointFeatures.push({
    type: 'Feature',
    properties: {
      name: 'Milano-Cortina 2026', event: 'Host City', medal: 'host',
      hometown: "Cortina d'Ampezzo", country: 'Italy', flag: 'ğŸ‡®ğŸ‡¹',
      color: OC.red, ringColor: OC.red,
    },
    geometry: { type: 'Point', coordinates: [CORTINA.lng, CORTINA.lat] },
  });

  map.addSource('arcs', { type: 'geojson', data: { type: 'FeatureCollection', features: arcFeatures } });
  map.addSource('points', { type: 'geojson', data: { type: 'FeatureCollection', features: pointFeatures } });

  // Arc lines
  map.addLayer({ id: 'arc-lines', type: 'line', source: 'arcs', paint: { 'line-color': ['get','ringColor'], 'line-width': 1.5, 'line-opacity': 0 }, layout: { 'line-cap': 'round' } });
  map.addLayer({ id: 'arc-glow', type: 'line', source: 'arcs', paint: { 'line-color': ['get','ringColor'], 'line-width': 5, 'line-opacity': 0, 'line-blur': 5 } });

  // Point layers
  map.addLayer({ id: 'point-ring', type: 'circle', source: 'points', paint: {
    'circle-radius': ['case', ['==',['get','medal'],'host'], 14, ['==',['get','medal'],'gold'], 11, 9],
    'circle-color': ['get','color'], 'circle-opacity': 0, 'circle-blur': 1,
  }});
  map.addLayer({ id: 'point-core', type: 'circle', source: 'points', paint: {
    'circle-radius': ['case', ['==',['get','medal'],'host'], 8, ['==',['get','medal'],'gold'], 6, ['==',['get','medal'],'silver'], 5, 4.5],
    'circle-color': ['case', ['==',['get','medal'],'host'], '#ffffff', ['get','color']],
    'circle-opacity': 0, 'circle-stroke-width': 2, 'circle-stroke-color': '#ffffff',
  }});

  // Cursor
  map.on('mouseenter', 'point-core', () => { map.getCanvas().style.cursor = 'pointer'; });
  map.on('mouseleave', 'point-core', () => { map.getCanvas().style.cursor = ''; });

  // Click point
  map.on('click', 'point-core', (e) => {
    const f = e.features[0];
    if (f.properties.medal === 'host') {
      map.flyTo({ center: [CORTINA.lng, CORTINA.lat], zoom: 10, pitch: 50, duration: 2000 });
      return;
    }
    showAthleteCard(f.properties);
    map.flyTo({ center: e.lngLat, zoom: 7, pitch: 40, duration: 2000, essential: true });
  });

  buildMedalStrip();
});

/* â”€â”€ Hero â†’ Reveal â”€â”€ */
document.getElementById('hero').addEventListener('click', () => {
  document.getElementById('hero').classList.add('hidden');
  rotating = false;

  map.flyTo({ center: [10, 48], zoom: 3.8, pitch: 35, bearing: -8, duration: 3500, essential: true });

  setTimeout(() => {
    document.getElementById('stats').style.opacity = '1';
    document.getElementById('brand').style.opacity = '1';
    document.getElementById('bottom-bar').style.opacity = '1';
  }, 800);

  setTimeout(() => {
    map.setPaintProperty('arc-lines', 'line-opacity', 0.45);
    map.setPaintProperty('arc-glow', 'line-opacity', 0.1);
    map.setPaintProperty('point-ring', 'circle-opacity', 0.25);
    map.setPaintProperty('point-core', 'circle-opacity', 1);
  }, 2000);

  setTimeout(() => { document.getElementById('stories').classList.add('visible'); }, 3500);
  setTimeout(() => { map.scrollZoom.enable(); }, 3500);
});

/* â”€â”€ Medal Strip â”€â”€ */
function buildMedalStrip() {
  const strip = document.getElementById('medal-strip');
  countries.sort((a, b) => b.gold - a.gold || b.silver - a.silver || b.bronze - a.bronze);
  countries.forEach(c => {
    const pill = document.createElement('div');
    pill.className = 'country-pill';
    pill.innerHTML = `
      <span class="flag">${c.flag}</span>
      <span>${c.name}</span>
      <span class="medals">
        <span class="g">${c.gold}ğŸ¥‡</span>
        <span class="s">${c.silver}ğŸ¥ˆ</span>
        <span class="b">${c.bronze}ğŸ¥‰</span>
      </span>`;
    pill.addEventListener('click', (ev) => {
      document.querySelectorAll('.country-pill').forEach(p => p.classList.remove('active'));
      ev.currentTarget.classList.add('active');
      if (c.athletes.length) {
        const a = c.athletes[0];
        map.flyTo({ center: [a.lng, a.lat], zoom: 6, pitch: 40, duration: 2000 });
        showAthleteCard({
          hometown: a.hometown, country: c.name, flag: c.flag,
          name: a.name, event: a.event, medal: a.medal,
          slug: a.slug || '', hometownCountry: a.hometownCountry || c.name,
        });
      }
    });
    strip.appendChild(pill);
  });
}

/* â”€â”€ Athlete Card â”€â”€ */
function showAthleteCard(props) {
  const body = document.getElementById('card-body');
  body.innerHTML = '';

  const ht = props.hometown;
  let athletes = [];
  countries.forEach(c => {
    c.athletes.forEach(a => {
      if (a.hometown === ht) {
        athletes.push({ ...a, country: c.name, flag: c.flag, hometownCountry: a.hometownCountry || c.name });
      }
    });
  });

  if (!athletes.length) {
    athletes = [{
      name: props.name, event: props.event, medal: props.medal,
      hometown: props.hometown, country: props.country, flag: props.flag,
      slug: props.slug || '', hometownCountry: props.hometownCountry || props.country,
    }];
  }

  athletes.forEach(a => {
    const emoji = a.medal === 'gold' ? 'ğŸ¥‡' : a.medal === 'silver' ? 'ğŸ¥ˆ' : 'ğŸ¥‰';
    const medalLabel = a.medal.charAt(0).toUpperCase() + a.medal.slice(1);
    const hometownCountry = a.hometownCountry || a.country;
    const profileUrl = a.slug ? `https://www.olympics.com/en/athletes/${a.slug}` : '';
    const linkHtml = profileUrl
      ? `<a class="athlete-link" href="${profileUrl}" target="_blank" rel="noopener">Olympic Profile <span class="arrow">â†—</span></a>`
      : '';

    const entry = document.createElement('div');
    entry.className = 'athlete-entry';
    entry.innerHTML = `
      <div class="athlete-top">
        <span class="medal-icon">${emoji}</span>
        <div>
          <div class="athlete-name">${a.name}</div>
          <div class="athlete-event">${medalLabel} Â· ${a.event}</div>
        </div>
      </div>
      <div class="athlete-meta">
        <div class="meta-block">
          <div class="meta-label">Hometown</div>
          <div class="meta-value">${a.hometown}, ${hometownCountry}</div>
        </div>
        <div class="meta-block">
          <div class="meta-label">Representing</div>
          <div class="meta-value"><span class="meta-flag">${a.flag}</span> ${a.country}</div>
        </div>
      </div>
      ${linkHtml}`;
    body.appendChild(entry);
  });

  document.getElementById('athlete-card').classList.add('visible');
}

function closeCard() {
  document.getElementById('athlete-card').classList.remove('visible');
}

/* â”€â”€ Map click to close card â”€â”€ */
map.on('click', (e) => {
  const f = map.queryRenderedFeatures(e.point, { layers: ['point-core'] });
  if (f.length === 0) closeCard();
});

/* â”€â”€ Keyboard nav â”€â”€ */
document.addEventListener('keydown', (e) => {
  if (e.key === 'Escape') {
    closeCard();
    map.flyTo({ center: [10, 48], zoom: 3.8, pitch: 35, bearing: -8, duration: 2000 });
  }
  if (e.key === 'ArrowRight') nextStory();
  if (e.key === 'ArrowLeft') prevStory();
});

/* â”€â”€ Stories Carousel â”€â”€ */
let currentStory = 0;

function initStories() {
  const dots = document.getElementById('story-dots');
  STORIES.forEach((_, i) => {
    const d = document.createElement('span');
    d.addEventListener('click', () => goToStory(i));
    dots.appendChild(d);
  });
  renderStory();
}

function renderStory() {
  const s = STORIES[currentStory];
  document.getElementById('story-counter').textContent = `${currentStory + 1} / ${STORIES.length}`;
  document.getElementById('story-sport').textContent = s.sport;
  document.getElementById('story-headline').textContent = s.headline;
  document.getElementById('story-body').textContent = s.body;
  document.querySelectorAll('#story-dots span').forEach((d, i) => {
    d.classList.toggle('active', i === currentStory);
  });
}

function goToStory(i) {
  currentStory = i;
  renderStory();
  const s = STORIES[currentStory];
  map.flyTo({ center: s.center, zoom: s.zoom, pitch: 40, duration: 2500, essential: true });
}

function nextStory() { goToStory((currentStory + 1) % STORIES.length); }
function prevStory() { goToStory((currentStory - 1 + STORIES.length) % STORIES.length); }

initStories();
</script>
</body>
</html>
